import { ApprovalStrategy, Category, TransitionType, TriggerStrategy, WorkflowInstanceStatus } from "../../prisma/generated/client.js";
import { ActorMeta } from "../types/action.types.js";
import { CreateStagesInput, CreateWorkflowDefinitionInput, stageId, UpdateStageInput, UpdateWorkflowInput, WorkflowFilterInput, workflowId } from "../types/workflow.types.js";
declare const WorkflowService: {
    saveWorkflowGraph: (workflowId: string, data: {
        stages: Array<{
            tempId?: string;
            name: string;
            order: number;
            isInitial: boolean;
            isFinal: boolean;
            category: Category;
            color?: string;
            metadata?: any;
            allowedNextCategories?: Category[];
            position?: {
                x: number;
                y: number;
            };
        }>;
        transitions: Array<{
            fromStageId: string;
            toStageId: string;
            label?: string;
            transitionType?: TransitionType;
            triggerStrategy?: TriggerStrategy;
            approvalStrategy?: ApprovalStrategy;
            autoTrigger?: boolean;
            condition?: any;
            metadata?: any;
            approvalConfig?: any;
            allowedRoleIds?: string[];
            allowedUserIds?: string[];
        }>;
    }, meta?: ActorMeta) => Promise<{
        id: string;
        createdAt: Date;
        name: string;
        status: import("../../prisma/generated/enums.js").WorkflowDefinitionStatus;
        version: number;
        updatedAt: Date;
        deletedAt: Date | null;
        isActive: boolean;
        createdById: string | null;
        publishedAt: Date | null;
        code: string;
        description: string | null;
        resourceId: string;
        publishedById: string | null;
    }>;
    createWorkflow: (data: CreateWorkflowDefinitionInput, meta?: ActorMeta) => Promise<{
        id: string;
        createdAt: Date;
        name: string;
        status: import("../../prisma/generated/enums.js").WorkflowDefinitionStatus;
        version: number;
        updatedAt: Date;
        deletedAt: Date | null;
        isActive: boolean;
        createdById: string | null;
        publishedAt: Date | null;
        code: string;
        description: string | null;
        resourceId: string;
        publishedById: string | null;
    }>;
    publishWorkflow: (workflowId: string, meta?: ActorMeta) => Promise<{
        workflowId: string;
        status: string;
    }>;
    getWorkflows: (options?: Partial<WorkflowFilterInput>) => Promise<{
        data: {
            id: string;
            createdAt: Date;
            name: string;
            status: import("../../prisma/generated/enums.js").WorkflowDefinitionStatus;
            version: number;
            updatedAt: Date;
            deletedAt: Date | null;
            isActive: boolean;
            createdById: string | null;
            publishedAt: Date | null;
            code: string;
            description: string | null;
            resourceId: string;
            publishedById: string | null;
        }[];
        total: number;
        page: number;
        pageSize: number;
    }>;
    getWorkflowById: ({ workflowId }: workflowId) => Promise<{
        createdBy: {
            email: string;
            id: string;
            name: string;
        } | null;
        resource: {
            id: string;
            name: string;
        };
        stages: ({
            outgoingTransitions: {
                id: string;
                priority: number;
                metadata: import("@prisma/client/runtime/client").JsonValue | null;
                fromStageId: string;
                toStageId: string;
                condition: import("@prisma/client/runtime/client").JsonValue | null;
                workflowId: string;
                transitionType: TransitionType;
                label: string | null;
                triggerStrategy: TriggerStrategy;
                approvalStrategy: ApprovalStrategy;
                approvalConfig: import("@prisma/client/runtime/client").JsonValue | null;
                autoTrigger: boolean;
            }[];
            incomingTransitions: {
                id: string;
                priority: number;
                metadata: import("@prisma/client/runtime/client").JsonValue | null;
                fromStageId: string;
                toStageId: string;
                condition: import("@prisma/client/runtime/client").JsonValue | null;
                workflowId: string;
                transitionType: TransitionType;
                label: string | null;
                triggerStrategy: TriggerStrategy;
                approvalStrategy: ApprovalStrategy;
                approvalConfig: import("@prisma/client/runtime/client").JsonValue | null;
                autoTrigger: boolean;
            }[];
        } & {
            id: string;
            name: string;
            metadata: import("@prisma/client/runtime/client").JsonValue | null;
            code: string;
            workflowId: string;
            category: Category;
            order: number;
            isInitial: boolean;
            isFinal: boolean;
            color: string | null;
            position: import("@prisma/client/runtime/client").JsonValue | null;
            allowedNextCategories: Category[];
        })[];
        transitions: ({
            fromStage: {
                id: string;
                name: string;
                metadata: import("@prisma/client/runtime/client").JsonValue | null;
                code: string;
                workflowId: string;
                category: Category;
                order: number;
                isInitial: boolean;
                isFinal: boolean;
                color: string | null;
                position: import("@prisma/client/runtime/client").JsonValue | null;
                allowedNextCategories: Category[];
            };
            toStage: {
                id: string;
                name: string;
                metadata: import("@prisma/client/runtime/client").JsonValue | null;
                code: string;
                workflowId: string;
                category: Category;
                order: number;
                isInitial: boolean;
                isFinal: boolean;
                color: string | null;
                position: import("@prisma/client/runtime/client").JsonValue | null;
                allowedNextCategories: Category[];
            };
        } & {
            id: string;
            priority: number;
            metadata: import("@prisma/client/runtime/client").JsonValue | null;
            fromStageId: string;
            toStageId: string;
            condition: import("@prisma/client/runtime/client").JsonValue | null;
            workflowId: string;
            transitionType: TransitionType;
            label: string | null;
            triggerStrategy: TriggerStrategy;
            approvalStrategy: ApprovalStrategy;
            approvalConfig: import("@prisma/client/runtime/client").JsonValue | null;
            autoTrigger: boolean;
        })[];
    } & {
        id: string;
        createdAt: Date;
        name: string;
        status: import("../../prisma/generated/enums.js").WorkflowDefinitionStatus;
        version: number;
        updatedAt: Date;
        deletedAt: Date | null;
        isActive: boolean;
        createdById: string | null;
        publishedAt: Date | null;
        code: string;
        description: string | null;
        resourceId: string;
        publishedById: string | null;
    }>;
    updateWorkflow: (id: workflowId, data: UpdateWorkflowInput, meta?: ActorMeta) => Promise<any>;
    archiveWorkflow: ({ workflowId }: workflowId, meta: ActorMeta) => Promise<{
        id: string;
        createdAt: Date;
        name: string;
        status: import("../../prisma/generated/enums.js").WorkflowDefinitionStatus;
        version: number;
        updatedAt: Date;
        deletedAt: Date | null;
        isActive: boolean;
        createdById: string | null;
        publishedAt: Date | null;
        code: string;
        description: string | null;
        resourceId: string;
        publishedById: string | null;
    }>;
    restoreWorkflow: ({ workflowId }: workflowId, meta: ActorMeta) => Promise<{
        id: string;
        createdAt: Date;
        name: string;
        status: import("../../prisma/generated/enums.js").WorkflowDefinitionStatus;
        version: number;
        updatedAt: Date;
        deletedAt: Date | null;
        isActive: boolean;
        createdById: string | null;
        publishedAt: Date | null;
        code: string;
        description: string | null;
        resourceId: string;
        publishedById: string | null;
    }>;
    deleteWorkflow: ({ workflowId }: workflowId, meta: ActorMeta) => Promise<{
        id: string;
        createdAt: Date;
        name: string;
        status: import("../../prisma/generated/enums.js").WorkflowDefinitionStatus;
        version: number;
        updatedAt: Date;
        deletedAt: Date | null;
        isActive: boolean;
        createdById: string | null;
        publishedAt: Date | null;
        code: string;
        description: string | null;
        resourceId: string;
        publishedById: string | null;
    }>;
    createStages: ({ workflowId }: workflowId, data: CreateStagesInput, meta?: ActorMeta) => Promise<{
        id: string;
        name: string;
        metadata: import("@prisma/client/runtime/client").JsonValue | null;
        code: string;
        workflowId: string;
        category: Category;
        order: number;
        isInitial: boolean;
        isFinal: boolean;
        color: string | null;
        position: import("@prisma/client/runtime/client").JsonValue | null;
        allowedNextCategories: Category[];
    }[]>;
    updateStages: ({ workflowId }: workflowId, stagesData: UpdateStageInput | UpdateStageInput[], meta?: ActorMeta) => Promise<{
        id: string;
        name: string;
        metadata: import("@prisma/client/runtime/client").JsonValue | null;
        code: string;
        workflowId: string;
        category: Category;
        order: number;
        isInitial: boolean;
        isFinal: boolean;
        color: string | null;
        position: import("@prisma/client/runtime/client").JsonValue | null;
        allowedNextCategories: Category[];
    } | {
        id: string;
        name: string;
        metadata: import("@prisma/client/runtime/client").JsonValue | null;
        code: string;
        workflowId: string;
        category: Category;
        order: number;
        isInitial: boolean;
        isFinal: boolean;
        color: string | null;
        position: import("@prisma/client/runtime/client").JsonValue | null;
        allowedNextCategories: Category[];
    }[] | undefined>;
    deleteStages: ({ workflowId }: workflowId, stagesData: stageId | stageId[], meta?: ActorMeta) => Promise<{
        id: string;
        name: string;
        metadata: import("@prisma/client/runtime/client").JsonValue | null;
        code: string;
        workflowId: string;
        category: Category;
        order: number;
        isInitial: boolean;
        isFinal: boolean;
        color: string | null;
        position: import("@prisma/client/runtime/client").JsonValue | null;
        allowedNextCategories: Category[];
    } | {
        id: string;
        name: string;
        metadata: import("@prisma/client/runtime/client").JsonValue | null;
        code: string;
        workflowId: string;
        category: Category;
        order: number;
        isInitial: boolean;
        isFinal: boolean;
        color: string | null;
        position: import("@prisma/client/runtime/client").JsonValue | null;
        allowedNextCategories: Category[];
    }[] | undefined>;
    getStagesByWorkflowId: ({ workflowId }: workflowId) => Promise<{
        id: string;
        name: string;
        metadata: import("@prisma/client/runtime/client").JsonValue | null;
        code: string;
        workflowId: string;
        category: Category;
        order: number;
        isInitial: boolean;
        isFinal: boolean;
        color: string | null;
        position: import("@prisma/client/runtime/client").JsonValue | null;
        allowedNextCategories: Category[];
    }[]>;
    getStagesByWorkflowIdandStageId: ({ workflowId }: workflowId, { stageId }: stageId) => Promise<{
        id: string;
        name: string;
        metadata: import("@prisma/client/runtime/client").JsonValue | null;
        code: string;
        workflowId: string;
        category: Category;
        order: number;
        isInitial: boolean;
        isFinal: boolean;
        color: string | null;
        position: import("@prisma/client/runtime/client").JsonValue | null;
        allowedNextCategories: Category[];
    }[]>;
    createTransitions: ({ workflowId }: workflowId, transitionsData: any[], meta?: ActorMeta) => Promise<{
        id: string;
        priority: number;
        metadata: import("@prisma/client/runtime/client").JsonValue | null;
        fromStageId: string;
        toStageId: string;
        condition: import("@prisma/client/runtime/client").JsonValue | null;
        workflowId: string;
        transitionType: TransitionType;
        label: string | null;
        triggerStrategy: TriggerStrategy;
        approvalStrategy: ApprovalStrategy;
        approvalConfig: import("@prisma/client/runtime/client").JsonValue | null;
        autoTrigger: boolean;
    }[]>;
    getTransitions: ({ workflowId }: workflowId) => Promise<{
        id: string;
        priority: number;
        metadata: import("@prisma/client/runtime/client").JsonValue | null;
        fromStageId: string;
        toStageId: string;
        condition: import("@prisma/client/runtime/client").JsonValue | null;
        workflowId: string;
        transitionType: TransitionType;
        label: string | null;
        triggerStrategy: TriggerStrategy;
        approvalStrategy: ApprovalStrategy;
        approvalConfig: import("@prisma/client/runtime/client").JsonValue | null;
        autoTrigger: boolean;
    }[]>;
    getTransitionById: ({ workflowId }: workflowId, transitionId: string) => Promise<{
        id: string;
        priority: number;
        metadata: import("@prisma/client/runtime/client").JsonValue | null;
        fromStageId: string;
        toStageId: string;
        condition: import("@prisma/client/runtime/client").JsonValue | null;
        workflowId: string;
        transitionType: TransitionType;
        label: string | null;
        triggerStrategy: TriggerStrategy;
        approvalStrategy: ApprovalStrategy;
        approvalConfig: import("@prisma/client/runtime/client").JsonValue | null;
        autoTrigger: boolean;
    }>;
    updateTransition: ({ workflowId }: workflowId, transitionId: string, data: any, meta?: ActorMeta) => Promise<{
        id: string;
        priority: number;
        metadata: import("@prisma/client/runtime/client").JsonValue | null;
        fromStageId: string;
        toStageId: string;
        condition: import("@prisma/client/runtime/client").JsonValue | null;
        workflowId: string;
        transitionType: TransitionType;
        label: string | null;
        triggerStrategy: TriggerStrategy;
        approvalStrategy: ApprovalStrategy;
        approvalConfig: import("@prisma/client/runtime/client").JsonValue | null;
        autoTrigger: boolean;
    }>;
    deleteTransition: ({ workflowId }: workflowId, transitionId: string, meta?: ActorMeta) => Promise<{
        id: string;
        priority: number;
        metadata: import("@prisma/client/runtime/client").JsonValue | null;
        fromStageId: string;
        toStageId: string;
        condition: import("@prisma/client/runtime/client").JsonValue | null;
        workflowId: string;
        transitionType: TransitionType;
        label: string | null;
        triggerStrategy: TriggerStrategy;
        approvalStrategy: ApprovalStrategy;
        approvalConfig: import("@prisma/client/runtime/client").JsonValue | null;
        autoTrigger: boolean;
    }>;
    closeInstance: (workflowId: string, instanceId: string, meta?: ActorMeta) => Promise<{
        id: string;
        createdAt: Date;
        status: WorkflowInstanceStatus;
        updatedAt: Date;
        currentStageId: string | null;
        createdById: string | null;
        resourceId: string;
        resourceType: string;
        startedAt: Date;
        endedAt: Date | null;
        endedReason: string | null;
        errorDetails: import("@prisma/client/runtime/client").JsonValue | null;
        lockedAt: Date | null;
        lockedBy: string | null;
        workflowId: string;
        startedById: string | null;
    }>;
    getInstance: (workflowId: string, instanceId: string) => Promise<{
        id: string;
        createdAt: Date;
        status: WorkflowInstanceStatus;
        updatedAt: Date;
        currentStageId: string | null;
        createdById: string | null;
        resourceId: string;
        resourceType: string;
        startedAt: Date;
        endedAt: Date | null;
        endedReason: string | null;
        errorDetails: import("@prisma/client/runtime/client").JsonValue | null;
        lockedAt: Date | null;
        lockedBy: string | null;
        workflowId: string;
        startedById: string | null;
    }>;
    listInstancesByWorkflow: (workflowId: string, options?: {
        skip?: number;
        take?: number;
    }) => Promise<{
        data: ({
            currentStage: {
                id: string;
                name: string;
                metadata: import("@prisma/client/runtime/client").JsonValue | null;
                code: string;
                workflowId: string;
                category: Category;
                order: number;
                isInitial: boolean;
                isFinal: boolean;
                color: string | null;
                position: import("@prisma/client/runtime/client").JsonValue | null;
                allowedNextCategories: Category[];
            } | null;
        } & {
            id: string;
            createdAt: Date;
            status: WorkflowInstanceStatus;
            updatedAt: Date;
            currentStageId: string | null;
            createdById: string | null;
            resourceId: string;
            resourceType: string;
            startedAt: Date;
            endedAt: Date | null;
            endedReason: string | null;
            errorDetails: import("@prisma/client/runtime/client").JsonValue | null;
            lockedAt: Date | null;
            lockedBy: string | null;
            workflowId: string;
            startedById: string | null;
        })[];
        total: number;
        page: number;
        pageSize: number;
    }>;
};
export default WorkflowService;
//# sourceMappingURL=workflow.service.d.ts.map